{% extends 'research/base.html' %} {% block content %}

<div class="col-lg-12">
    <div class="page-section">
        <!-- .section-block -->
        <div class="alert alert-primary has-icon alert-dismissible fade show">

            <p class="mb-0"> Welcome <b>{{ user.first_name }} {{ user.last_name}}</b>. </p>

        </div>
    </div>
</div><!-- /.section-block -->
<!-- grid row -->
<hr>

<br>

<div class="card-deck-xl">
    <div class="col-lg-12">

    {% if object_list %}
      <!-- grid column -->
      <div class="col-lg-12">
        <br>
        <!-- .table-responsive -->
        <div class="table-responsive">
            <!-- .table -->
            <table id="dt-responsive" class="table table-striped table-bordered table-hover dt-responsive nowrap w-100">
              <!-- thead -->

              <thead class="thead-">
                <tr>

                  <th>#</th>
                  <th>Author</th>
                  <th>Title</th>
                  <th>Publication Type</th>
                  <th>Journal Name</th>
                  <th>Publisher</th>
                  <th>Doi</th>
                  <th>Status</th>
                  <th>action</th>
                </tr>
              </thead><!-- /thead -->
              <!-- tbody -->
              <tbody>
                  {% for publication in object_list %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ publication.author.first_name }} 
                        {{ publication.author.last_name}}</td>
                    <td>{{ publication.title }}</td>
                    <td>{{ publication.publication_type }}</td>
                    <td>{{ publication.journal_name }}</td>
                    <td>{{ publication.publisher }}</td>
                    <td>
                        <a href="http://dx.doi.org/{{ publication.doi }}"target="_blank">
                        {{ publication.doi }}</a>
                    </td>
                    <td>
                        {% if publication.is_approved == False %}
                          <span style='color:red;font-size:11px;font-weight:bold;'>Not Approved</span>
                        {% else %}
                          <span style='color:green;font-size:11px;font-weight:bold;'>Approved</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'publication' publication.id %}" class="btn btn-sm btn-icon">
                           <i class="fa fa-eye"></i> <span class="sr-only">View</span>
                        </a>

                        <form method="POST" action="{% url 'delete_publication' publication.id %}">
                          {% csrf_token %}
                          
                          <a href="#" class="btn btn-sm btn-icon" data-toggle="modal" data-target="#confirm-delete-modal">
                              <i class="fa fa-trash-alt" style="color:red"></i> <span class="sr-only">Delete</span>
                           </a>
                         
                          <!-- Modal -->
                          <div class="modal fade" id="confirm-delete-modal" tabindex="-1" role="dialog" aria-labelledby="confirm-delete-modal-label" aria-hidden="true">
                              <div class="modal-dialog modal-dialog-centered" role="document">
                                  <div class="modal-content">
                                  <div class="modal-header">
                                      <h3 class="modal-title" id="confirm-delete-modal-label">Deleting Publication</h3>
                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                      </button>
                                  </div>
                                  <div class="modal-body">
                                      Are you sure you want to delete this Publication?
                                  </div>
                                  <div class="modal-footer">
                                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                      <button type="submit" class="btn btn-danger">Delete</button>
                                  </div>
                                  </div>
                              </div>
                          </div>
                      </form>
                        
                    </td>
                  </tr>
                  {% endfor %}
              </tbody><!-- /tbody -->
            </table><!-- /.table -->
          </div><!-- /.table-responsive -->
        </div>
      </div><!-- /.card -->
    </div><!-- /grid column -->
    {% else %}
    <div class="col-lg-12">
        <div class="alert alert-danger alert-dismissible fade show">
        No Publications found
        </div>
    </div>
             <!-- /.card -->
    {% endif %}
    </div>
</div><!-- /card-deck-xl -->

{% endblock %}