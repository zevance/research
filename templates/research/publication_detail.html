{% extends 'research/base.html' %} {% block content %}

<div class="col-lg-12">
  <div class="page-section">
    <!-- .section-block -->
    <div class="alert alert-primary has-icon alert-dismissible fade show">
      <p class="mb-0">
        Welcome <b>{{ user.first_name }} {{ user.last_name}}</b>. Please fill the form below to add Publications
      </p>
    </div>
  </div>
</div>
<!-- /.section-block -->
<!-- grid row -->
<hr />

<br />
<div class="page-section">
    <!-- .card-deck-xl -->
    <div class="card-deck-xl">
      <!-- .card -->
      <div class="card card-fluid">
           <div class="card-body">
            <div class="card card-fluid">

              <h6 class="card-header"> Fill the form below to submit a publication* </h6><!-- .card-body -->
              <div class="card-body">
                        <!-- form -->
                        <form action="{% url 'upload_publication' %}" method="POST" class="needs-validation">

                          {% csrf_token %}
                          
                          {% if user.is_authenticated %}
                          <input type="hidden" name="author_id" value="{{ user.id }}" class="form-control">
                          {% endif %}
                            <!-- .row -->
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Publication Type</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="publication_type" value="{{ publication.type }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication Type">
                          </div>
                        </div><!-- /.row -->
                        {% comment %} <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Publication Authors</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="authors" value="{{ publication.authors|join:", " }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication author">
                          </div>
                        </div><!-- /.row --> {% endcomment %}
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Publication Title</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="title" value="{{ publication.title }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication Title">
                          </div>
                        </div><!-- /.row -->
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Journal Name</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="journal_name" value="{{ publication.journal }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Journal name">
                          </div>
                        </div><!-- /.row -->
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Publisher</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="publisher" value="{{ publication.publisher }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publisher">
                          </div>
                        </div><!-- /.row -->
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">DOI</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="doi" value="{{ publication.doi }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication Type">
                          </div>
                        </div><!-- /.row -->
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Year</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="year_of_publication" value="{{ publication.year }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication Type">
                          </div>
                        </div><!-- /.row -->
                        {% if publication.pages %}
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Pages</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="pages" value="{{ publication.pages }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication Type">
                          </div>
                        </div><!-- /.row -->
                        {% endif %}
                        {% if publication.volume %}
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Volume</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="volume" value="{{ publication.volume }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication Type">
                          </div>
                        </div><!-- /.row -->
                        {% endif %}
                        {% if publication.abstract %}
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Abstract</label>
                          <div class="col-lg-8 col-xl-7">
                            <textarea name="abstract" class="form-control" placeholder="Abstract" rows="10">
                              {{ publication.abstract }}
                            </textarea>
                          </div>
                        </div><!-- /.row -->
                        {% else %}
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Abstract</label>
                          <div class="col-lg-8 col-xl-7">
                            <textarea name="abstract" class="form-control" placeholder="Abstract" rows="10" required="">
                            </textarea>
                          </div>
                        </div><!-- /.row -->
                        {% endif %}
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Author 1</label>
                          <div class="col-lg-8 col-xl-7">
                            <input type="text" id="maskUsphone" name="authors" value="{{ publication.author_1 }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication author">
                          </div>
                        </div><!-- /.row -->
                        {% if publication.co_authors %}
                          <div class="row mb-3">
                            <label for="maskUsphone" class="col-lg-2 text-lg-right">Other authors</label>
                            <div class="col-lg-8 col-xl-7">
                              <input type="text" id="maskUsphone" name="co_authors" value="{{ publication.co_authors|join:", " }}" class="form-control" autocomplete="off" data-mask="usphone" placeholder="Publication author">
                            </div>
                          </div><!-- /.row -->
                        {% endif %}   
                        
                        <div class="row mb-3">
                        <label for="maskUsphone" class="col-lg-2 text-lg-right">License</label>
                        <div class="col-lg-8 col-xl-7">
                          <select class="custom-select" id="appeal" required="" name="license">
                              <option value="">Select License</option>
                              {% for key,value in license_choices.items %}
                                <option value="{{ key }}">
                                  {% if key == values.name %}
                                    selected
                                    {% endif %}
                                  {{ value }}
                                </option>
                              {% endfor %}
                          </select>
                        </div>
                        </div>
                        <div class="row mb-3">
                          <label for="maskUsphone" class="col-lg-2 text-lg-right">Collection</label>
                          <div class="col-lg-8 col-xl-7">
                            <select class="custom-select" id="appeal" required="" name="collection">
                                <option value="">Select Collection</option>
                                {% for key,value in collection_choices.items %}
                                  <option value="{{ key }}">
                                    {% if key == values.name %}
                                      selected
                                      {% endif %}
                                    {{ value }}
                                  </option>
                                {% endfor %}
                            </select>
                          </div>
                          </div>
                       
                          <hr class="mb-4">
                          <div class="row mb-3">
                            <label class="col-lg-2"></label>
                            <div class="col-lg-8 col-xl-7">
                              <button class="btn btn-primary btn-lg btn-block " name="submit" type="submit" style="width:100%;">
                                Submit
                              </button>
                            </div>
                          </div>
                        </form><!-- /form .needs-validation -->
                        <!-- /form -->
                      </div>
                    </div> 
              </div>
<!-- /.card-body -->
<!-- grid row -->
<!-- /.page-section -->
{% endblock %}
</div>
</div>
</div>
